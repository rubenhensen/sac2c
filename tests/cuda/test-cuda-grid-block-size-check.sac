// CUDA Tests
//
// This test checks that grid/block size runtime checks are added to
// the output when generating CUDA code.
//
// This test does not check that the runtime check actually works, only
// that it is included.
//

// SAC_TEST|include common.mk
// SAC_TEST|SAC2C_FLAGS += -t cuda
// SAC_TEST|CALL_SAC2C := $(SAC2C) $(SAC2C_FLAGS) -bcg
//
// SAC_TEST|all: <file-name>
// SAC_TEST|<tab>$(CALL_SAC2C) $<
// SAC_TEST|<tab>@cat a.out.cu | $(GREP_COMMAND_OUTPUT) "grid.x > [0-9]* || grid.y > [0-9]* || grid.z > [0-9]*" 1
// SAC_TEST|<tab>@cat a.out.cu | $(GREP_COMMAND_OUTPUT) "block.x > [0-9]* || block.y > [0-9]* || block.z > [0-9]*" 1

int main ()
{
  a = with {
      (. <= [iv] <= .) : _add_SxS_ (iv, 1);
    } : genarray ([65556], 1);

  return _sel_VxA_ ([65555], a);
}
