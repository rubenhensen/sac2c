#
# $Log$
# Revision 1.7  2000/07/28 09:16:27  mab
# make deps done
#
# Revision 1.6  2000/07/11 15:56:37  dkr
# make deps done
#
# Revision 1.5  2000/01/17 18:37:49  cg
# Handling of target platform unified: One of the following
# is always defined:
# SAC_FOR_SOLARIS_SPARC, SAC_FOR_LINUX_X86, OR SAC_FOR_OSF_ALPHA.
#
# Revision 1.4  1999/12/13 11:28:59  dkr
# *** empty log message ***
#
# Revision 1.3  1999/07/09 11:39:08  cg
# make deps done
#
# Revision 1.2  1999/07/08 15:39:55  cg
# Dependency from libsac now uses libsac/libsac.a instead of
# runtime/libsac.a
#
# Revision 1.1  1999/07/08 12:02:34  cg
# Initial revision
#
#



#
# OS setup:
#
# legal values for OS currently are:
#    SOLARIS_SPARC
#    LINUX_X86
#    OSF_ALPHA
#
OS        := SOLARIS_SPARC


CC        := gcc
CCFLAGS   := -ansi -Wall -D__EXTENSIONS__ -g -DSAC_FOR_$(OS)

LIBDIR    := ../libsac
  # Here, we cannot use the links in ../runtime because after a gmake clean
  # they are not yet existing.

INCS      := -I../runtime -I../libsac -I../../inc
LIBS      := -L$(LIBDIR)


.PHONY: all tar


all:  CacheSimAnalyser CacheSimTest


CacheSimAnalyser: CacheSimAnalyser.o $(LIBDIR)/libsac.a
	$(CC) $(CCFLAGS) $(CFLAGS) $(INCS) $(LIBS) -o $@ $< -lsac -lm

CacheSimTest: CacheSimTest.o $(LIBDIR)/libsac.a
	$(CC) $(CCFLAGS) $(CFLAGS) $(INCS) $(LIBS) -o $@ $< -lsac -lm

%.o: %.c 
	$(CC) $(CCFLAGS) $(CFLAGS) $(INCS) -o $@ -c $<


deps:
	makedepend $(INCS) *.c


clean:
	$(RM) *.o *.a *.bak *.old *~
	$(RM) -r .sb SunWS_cache
	$(RM) CacheSimTest CacheSimAnalyser

# DO NOT DELETE THIS LINE -- make depend depends on it.

CacheSimAnalyser.o: /usr/include/stdio.h /usr/include/sys/feature_tests.h
CacheSimAnalyser.o: /usr/include/sys/isa_defs.h /usr/include/sys/va_list.h
CacheSimAnalyser.o: /usr/include/stdio_tag.h /usr/include/stdio_impl.h
CacheSimAnalyser.o: ../runtime/sac_cachesim.h ../runtime/sac_message.h
CacheSimAnalyser.o: ../libsac/cachesim.h
CacheSimTest.o: /usr/include/stdio.h /usr/include/sys/feature_tests.h
CacheSimTest.o: /usr/include/sys/isa_defs.h /usr/include/sys/va_list.h
CacheSimTest.o: /usr/include/stdio_tag.h /usr/include/stdio_impl.h
CacheSimTest.o: ../runtime/sac_cachesim.h
