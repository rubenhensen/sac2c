/*
 *
 * $Log$
 * Revision 1.2  1998/05/03 13:08:39  dkr
 * added icm2c_wl.h
 *
 * Revision 1.1  1998/04/25 16:18:08  sbs
 * Initial revision
 *
 *
 */

#include <stdio.h>
#include <malloc.h>
#include "dbug.h"
#include "main.h"
#include "globals.h"

#include "icm2c_std.h"
#include "icm2c_wl.h"

/*
 * Variables needed for the code generated by "icm_betest.c":
 */
node *arg_info = NULL;

#define ICM_ALL
#include "icm_vars.c"
#undef ICM_ALL

MAIN
{

    char buffer[1024];
    int scanf_res;

    /*
     * preset the globals used for the compilation of ICM's
     */
    check_boundary = 0;
    outfile = stdout;
    traceflag = NO_TRACE;
    print_objdef_for_header_file = 0;
    indent = 0;

    /*
     * processing parameters:
     */
    OPT ARG 'b':
    {
        check_boundary = 1;
    }
    OTHER
    {
        fprintf (stderr, "unknown option \"%c\"\n", **argv);
    }
    ENDOPT

    scanf_res = scanf ("%s", buffer);
    while (scanf_res > 0) {
        if (buffer[strlen (buffer) - 1] == '(')
            buffer[strlen (buffer) - 1] = '\0';
        DBUG_PRINT ("BEtest", ("icm found: %s\n", buffer));

#define ICM_ALL
#include "icm_betest.c"
#undef ICM_ALL
        printf ("icm %s not defined!\n", buffer);
        scanf ("%s\n", buffer);
        scanf_res = scanf ("%s", buffer);
    }

    return (0);
}
